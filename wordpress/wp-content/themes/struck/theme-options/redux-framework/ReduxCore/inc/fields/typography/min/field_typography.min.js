jQuery.noConflict(),jQuery(document).ready(function(e){function t(t){var a=jQuery(t).parents(".redux-container-typography:first").attr("data-id");e(t).hasClass("redux-typography-family");var r=e("#"+a+" select.redux-typography-family").val();r||(r=null);var p=e("#"+a+" select.redux-typography-family-backup").val(),o=e("#"+a+" .redux-typography-size").val(),y=e("#"+a+" .redux-typography-height").val(),s=e("#"+a+" .redux-typography-word").val(),l=e("#"+a+" .redux-typography-letter").val(),i=e("#"+a+" select.redux-typography-align").val(),n=e("#"+a+" select.redux-typography-transform").val(),g=e("#"+a+" select.redux-typography-font-variant").val(),h=e("#"+a+" select.redux-typography-decoration").val(),d=e("#"+a+" select.redux-typography-style").val(),u=e("#"+a+" select.redux-typography-subsets").val(),c=e("#"+a+" .redux-typography-color").val(),v=e("#"+a).data("units"),f=e("#"+a+" .redux-typography-family option:selected"),x=r,w=f.data("google");e("#"+a).hasClass("typography-initialized")||(d=e("#"+a+" select.redux-typography-style").data("value"),u=e("#"+a+" select.redux-typography-subsets").data("value"),""!==d&&(d=String(d)),void 0!==typeof u&&(u=String(u)));var m="";if(void 0===redux.fonts.google&&(w=!1),w&&r in redux.fonts.google?m=redux.fonts.google[r]:f.data("details")&&(m=jQuery.parseJSON(decodeURIComponent(f.data("details"))),e("#"+a+" .redux-typography-font-options").val(decodeURIComponent(f.data("details")))),e(t).hasClass("redux-typography-family")){var b='<option value=""></option>';if(w){var j="";e.each(m.variants,function(e,t){t.id===d||1===Object.size(m.variants)?(j=' selected="selected"',d=t.id):j="",b+='<option value="'+t.id+'"'+j+">"+t.name.replace(/\+/g," ")+"</option>"}),e("#"+a+" .redux-typography-style").html(b),j="",b='<option value=""></option>',e.each(m.subsets,function(e,t){t.id===u||1===Object.size(m.subsets)?(j=' selected="selected"',u=t.id):j="",b+='<option value="'+t.id+'"'+j+">"+t.name.replace(/\+/g," ")+"</option>"}),"undefined"!=typeof p&&""!==p&&(x+=", "+p),e("#"+a+" .redux-typography-subsets").html(b),e("#"+a+" .redux-typography-subsets").parent().fadeIn("fast"),e("#"+a+" .typography-family-backup").fadeIn("fast")}else m&&(e.each(m,function(t,r){t===d||"normal"===t?(j=' selected="selected"',e("#"+a+" .typography-style .select2-chosen").text(r)):j="",b+='<option value="'+t+'"'+j+">"+r.replace("+"," ")+"</option>"}),e("#"+a+" .redux-typography-style").html(b),e("#"+a+" .redux-typography-subsets").parent().fadeOut("fast"),e("#"+a+" .typography-family-backup").fadeOut("fast"))}else e(t).hasClass("redux-typography-family-backup")&&""!==p&&e("#"+a+" .redux-typography-font-family").val(x);0===e("#"+a+" select.redux-typography-style option[value='"+d+"']").length?(d="",e("#"+a+" select.redux-typography-style").val("")):"400"===d&&e("#"+a+" select.redux-typography-style").val(d),0===e("#"+a+" select.redux-typography-subsets option[value='"+u+"']").length&&(u="",e("#"+a+" select.redux-typography-subsets").val(""));var C="style_link_"+a;if(e("."+C).remove(),null!==r&&"inherit"!==r&&e("#"+a).hasClass("typography-initialized")){var z=r.replace(/\s+/g,"+");if(w){var Q=z;d&&(Q+=":"+d.replace(/\-/g," ")),u&&(Q+="&subset="+u),"undefined"!=typeof WebFont&&WebFont&&WebFont.load({google:{families:[Q]}}),e("#"+a+" .redux-typography-google").val(!0)}else e("#"+a+" .redux-typography-google").val(!1)}if(-1!==d.indexOf("italic")?(e("#"+a+" .typography-preview").css("font-style","italic"),e("#"+a+" .typography-font-style").val("italic"),d=d.replace("italic","")):e("#"+a+" .typography-font-style").val(""),e("#"+a+" .typography-font-weight").val(d),y||(y=o),""===o?e("#"+a+" .typography-font-size").val(""):e("#"+a+" .typography-font-size").val(o+v),""===y?e("#"+a+" .typography-line-height").val(""):e("#"+a+" .typography-line-height").val(y+v),e("#"+a+" .typography-word-spacing").val(s+v),e("#"+a+" .typography-letter-spacing").val(l+v),e("#"+a).hasClass("typography-initialized")){var k=e("#"+a+" .typography-preview").data("preview-size");"0"==k&&e("#"+a+" .typography-preview").css("font-size",o+v),e("#"+a+" .typography-preview").css("font-style","normal"),e("#"+a+" .typography-preview").css("font-weight",d),e("#"+a+" .typography-preview").css("font-family",r+", sans-serif"),"none"===r&&""===r&&e("#"+a+" .typography-preview").css("font-family","inherit"),e("#"+a+" .typography-preview").css("line-height",y+v),e("#"+a+" .typography-preview").css("word-spacing",s+v),e("#"+a+" .typography-preview").css("letter-spacing",l+v),c&&(e("#"+a+" .typography-preview").css("color",c),e("#"+a+" .typography-preview").css("background-color",getContrastColour(c))),e("#"+a+" .redux-typography-font-family").val(x),e("#"+a+" .typography-style .select2-chosen").text(e("#"+a+" .redux-typography-style option:selected").text()),e("#"+a+" .typography-script .select2-chosen").text(e("#"+a+" .redux-typography-subsets option:selected").text()),i&&e("#"+a+" .typography-preview").css("text-align",i),n&&e("#"+a+" .typography-preview").css("text-transform",n),g&&e("#"+a+" .typography-preview").css("font-variant",g),h&&e("#"+a+" .typography-preview").css("text-decoration",h),e("#"+a+" .typography-preview").slideDown()}e("#"+a).hasClass("typography-initialized")||e("#"+a).addClass("typography-initialized")}Object.size=function(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a},jQuery(".redux-typography-container").each(function(){var e=jQuery(this).find(".redux-typography-family");""!==e.data("value")&&jQuery(e).val(e.data("value")),t(e),window.onbeforeunload=null}),jQuery(".redux-typography").on("change",function(){t(this)}),jQuery(".redux-typography-size, .redux-typography-height, .redux-typography-word, .redux-typography-letter, .redux-typography-align, .redux-typography-transform, .redux-typography-font-variant, .redux-typography-decoration").keyup(function(){t(this)}),e(".redux-typography-color").wpColorPicker({change:function(e,a){redux_change(jQuery(this)),jQuery(this).val(a.color.toString()),t(jQuery(this))}}),jQuery(".redux-typography-size").numeric({allowMinus:!1}),jQuery(".redux-typography-height, .redux-typography-word, .redux-typography-letter").numeric({allowMinus:!0}),jQuery(".redux-typography-family, .redux-typography-family-backup, .redux-typography-align, .redux-typography-transform, .redux-typography-font-variant, .redux-typography-decoration").select2({width:"resolve",triggerChange:!0,allowClear:!0})});